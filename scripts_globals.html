{{define "scripts_globals"}}
<script>
    // --- ESTADO GLOBAL ---
    // Recibimos los datos de Go aquí
    const dashboardData = {{.DashboardJSON}} || [];
    const panels = {}; // Diccionario para guardar referencias a cada panel
    
    // Elementos DOM Globales
    const gridContainer = document.getElementById('dashboard-grid');
    const statusSpan = document.getElementById('status');
    const pauseBtn = document.getElementById('pause-btn');
    const alertsBtn = document.getElementById('alerts-btn');
    
    // Estados
    let isGlobalPaused = false;
    let areAlertsMuted = false;
    let globalFilterText = "";
    
    // Configuración
    const MAX_BUFFER_SIZE = 1000;
    
    // Hoja de estilos dinámica para filtros
    const dynamicStyleSheet = document.createElement("style");
    document.head.appendChild(dynamicStyleSheet);

    // Variables de Selección
    let selectedLinesSet = new Set();
    let lastSelectedLine = null; 

    // --- ICONOS SVG (CONSTANTES) ---
    const ICON_EXPAND = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6M9 21H3v-6M21 3l-7 7M3 21l7-7"/></svg>`;
    const ICON_COLLAPSE = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"/></svg>`;
    const ICON_CLOSE = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>`;
    const ICON_CLIPBOARD = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"></path><rect x="8" y="2" width="8" height="4" rx="1" ry="1"></rect></svg>`;
    const ICON_PAUSE = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>`;
    const ICON_PLAY = `<svg viewBox="0 0 24 24" fill="currentColor" stroke="none"><path d="M5 3l14 9-14 9V3z"/></svg>`;
    const ICON_DOWNLOAD = `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>`;
</script>
{{end}}
